<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>My experiment</title>
    <script src="../jspsych-dist/dist/jspsych.js"></script>
    <script src="../jspsych-dist/dist/plugin-html-button-response.js"></script>
    <script src="../jspsych-dist/dist/plugin-html-keyboard-response.js"></script>
    <script src="https://pixijs.download/release/pixi.js"></script>
    <script src="../jspsych-psychophysics.js"></script>
    <link rel="stylesheet" href="../jspsych-dist/dist/jspsych.css"></link>
  </head>
  
  <body>
  <script>
    // jsPsychの初期化
    const jsPsych = initJsPsych({
        on_finish: function() {
            jsPsych.data.displayData();
        }
    })
    
    // 参加者のIDを作成，ファイル名を設定
    const subject_id = jsPsych.randomization.randomID(10);
    const filename = `${subject_id}.csv`;
    
    // psychophysicsプラグインのテスト
    // 刺激
    const rect_object = {
      obj_type: 'rect',
      startX: 200, // キャンバス内での位置
      startY: 150,
      width: 150, // 大きさ
      height: 150,
      line_color: '#ffffff',
      fill_color: '#ffffff',
      show_start_time: 500 // トライアル開始から刺激呈示までの時間 (ms)
    }
    
    // rectangle刺激の呈示
    const trial_pp = {
      type: jsPsychPsychophysics,
      stimuli: rect_object,
      choices: ['f', 'j'],
      canvas_width: 1000,
      canvas_height: 800,
      background_color: '#008000',
    }
  
  
    jsPsych.run([preload, trial_pp]);
  </script>
  </body>
</html>
